<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Elemental Arena Battle</title>
<style>
body{margin:0; background:#111; color:#fff; font-family:sans-serif; text-align:center; overflow:hidden;}
canvas{display:block; margin:0 auto; background:linear-gradient(#222,#444);}
#scoreboard{position:absolute; top:10px; left:10px;}
button{padding:10px 20px; margin:10px; cursor:pointer;}
</style>
</head>
<body>
<h1>Elemental Arena Battle</h1>
<div id="scoreboard">Score: <span id="score">0</span></div>
<button onclick="startGame()">Start Game</button>
<canvas id="gameCanvas" width="800" height="500"></canvas>
<script>
const canvas=document.getElementById('gameCanvas');
const ctx=canvas.getContext('2d');

let player={x:400,y:250,size:30,color:'blue',hp:100,score:0,angle:0};
let bullets=[],enemies=[],elements=['Fire','Water','Wind','Earth'],keys={},mouse={x:400,y:250};

// INPUT
window.addEventListener('keydown',e=>keys[e.key.toLowerCase()]=true);
window.addEventListener('keyup',e=>keys[e.key.toLowerCase()]=false);
canvas.addEventListener('mousemove',e=>{
  const rect=canvas.getBoundingClientRect();
  mouse.x=e.clientX-rect.left;
  mouse.y=e.clientY-rect.top;
});

// START GAME
function startGame(){
  player.hp=100; player.score=0; bullets=[]; enemies=[];
  spawnEnemies(5);
  requestAnimationFrame(gameLoop);
}

// SPAWN ENEMIES
function spawnEnemies(n){
  for(let i=0;i<n;i++){
    enemies.push({
      x:Math.random()*700+50,
      y:Math.random()*400+50,
      size:25,
      color:'red',
      hp:30,
      angle:0,
      shootTimer:0
    });
  }
}

// GAME LOOP
function gameLoop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // PLAYER ROTATION
  player.angle=Math.atan2(mouse.y-player.y,mouse.x-player.x);

  // PLAYER MOVEMENT
  let nx=player.x,ny=player.y;
  if(keys['w']) ny-=3; if(keys['s']) ny+=3; if(keys['a']) nx-=3; if(keys['d']) nx+=3;
  if(nx>0&&nx<canvas.width-player.size) player.x=nx;
  if(ny>0&&ny<canvas.height-player.size) player.y=ny;

  // PLAYER SHOOT
  if(keys['e']) fireBullet('Fire');
  if(keys['q']) fireBullet('Water');
  if(keys['e']&&keys['q']) fireBullet('Steam',true);

  // DRAW PLAYER
  ctx.save(); ctx.translate(player.x+player.size/2,player.y+player.size/2);
  ctx.rotate(player.angle);
  ctx.fillStyle=player.color; ctx.fillRect(-player.size/2,-player.size/2,player.size,player.size);
  ctx.restore();

  // BULLETS
  bullets.forEach((b,i)=>{
    b.x+=b.dx; b.y+=b.dy;
    ctx.beginPath();
    ctx.arc(b.x,b.y,b.special?10:5,0,Math.PI*2);
    ctx.fillStyle=b.color; ctx.fill();

    // COLLISION WITH ENEMIES
    enemies.forEach((en,j)=>{
      if(b.x>en.x && b.x<en.x+en.size && b.y>en.y && b.y<en.y+en.size && b.owner==='player'){
        en.hp-=b.special?10:3;
        if(en.hp<=0){ enemies.splice(j,1); player.score+=10; document.getElementById('score').innerText=player.score; }
        bullets.splice(i,1);
      }
    });
    if(b.x<0||b.x>canvas.width||b.y<0||b.y>canvas.height) bullets.splice(i,1);
  });

  // ENEMIES
  enemies.forEach(en=>{
    // MOVE TOWARDS PLAYER
    let dx=player.x-en.x, dy=player.y-en.y, dist=Math.hypot(dx,dy);
    if(dist>0){ en.x+=dx/dist*1.5; en.y+=dy/dist*1.5; }

    // SHOOT
    en.shootTimer++;
    if(en.shootTimer>60){
      en.shootTimer=0;
      let angle=Math.atan2(player.y-en.y,player.x-en.x);
      bullets.push({x:en.x+en.size/2,y:en.y+en.size/2,dx:4*Math.cos(angle),dy:4*Math.sin(angle),color:'orange',owner:'enemy',special:false});
    }

    // DRAW ENEMY
    ctx.fillStyle=en.color; ctx.fillRect(en.x,en.y,en.size,en.size);
  });

  // PLAYER HP BAR
  ctx.fillStyle='red'; ctx.fillRect(20,20,player.hp*2,20);
  ctx.strokeStyle='white'; ctx.strokeRect(20,20,200,20);

  if(player.hp<=0){ alert('Game Over! Score: '+player.score); return; }
  requestAnimationFrame(gameLoop);
}

// FIRE BULLET
function fireBullet(type,special=false){
  let color=type==='Fire'?'orange':type==='Water'?'cyan':'yellow';
  bullets.push({x:player.x+player.size/2,y:player.y+player.size/2,dx:5*Math.cos(player.angle),dy:5*Math.sin(player.angle),color:color,owner:'player',special:special});
}
</script>
</body>
</html>



















