<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Last Shinobi Standing 2D</title>
<style>
  body { margin:0; overflow:hidden; background:#111; font-family:sans-serif; }
  canvas { display:block; background:#222; }
  #menu {
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    text-align:center; color:white;
  }
  #menu button { display:block; margin:10px auto; padding:10px 20px; font-size:20px; cursor:pointer; }
  #ui {
    position:absolute; top:10px; left:10px; color:white;
  }
  #ui p { margin:5px; }
</style>
</head>
<body>

<div id="menu">
  <h1>Last Shinobi Standing</h1>
  <button id="singleplayer">Singleplayer</button>
  <button id="multiplayer">Multiplayer</button>
  <button id="settings">Settings</button>
</div>

<div id="ui" style="display:none;">
  <p id="hp">HP: 100</p>
  <p id="special">Special: 0/100</p>
  <p id="score">Score: 0</p>
</div>

<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// ---------- GAME VARIABLES ----------
let gameRunning = false;
let player = {x:canvas.width/4, y:canvas.height/2, size:40, color:'blue', hp:100, special:0};
let enemy = {x:3*canvas.width/4, y:canvas.height/2, size:40, color:'red', hp:100};
let bullets = [];
let enemyBullets = [];
let obstacles = [];
let score = 0;

// ---------- ELEMENT ATTACKS ----------
const elements = [
  {name:'Fire', key:'e', color:'orange', damage:5},
  {name:'Water', key:'q', color:'blue', damage:5}
];

// ---------- INPUT ----------
let keys = {};
window.addEventListener('keydown', e => keys[e.key.toLowerCase()]=true);
window.addEventListener('keyup', e => keys[e.key.toLowerCase()]=false);
let mouse = {x:0, y:0};
canvas.addEventListener('mousemove', e => {
  const rect = canvas.getBoundingClientRect();
  mouse.x = e.clientX - rect.left;
  mouse.y = e.clientY - rect.top;
});

// ---------- START MENU ----------
document.getElementById('singleplayer').addEventListener('click',()=>{
  document.getElementById('menu').style.display='none';
  document.getElementById('ui').style.display='block';
  gameRunning = true;
});

document.getElementById('multiplayer').addEventListener('click',()=>{alert('Multiplayer not ready yet!');});
document.getElementById('settings').addEventListener('click',()=>{alert('Settings coming soon!');});

// ---------- SHOOT FUNCTION ----------
function shoot(owner){
  let target = owner==='player'?bullets:enemyBullets;
  let color = owner==='player'?elements[0].color:elements[1].color;
  let dx = owner==='player'?mouse.x - (owner==='player'?player.x:enemy.x):player.x - enemy.x;
  let dy = owner==='player'?mouse.y - (owner==='player'?player.y:enemy.y):player.y - enemy.y;
  if(owner==='enemy'){dx = player.x - enemy.x; dy = player.y - enemy.y;}
  let mag = Math.sqrt(dx*dx + dy*dy);
  if(mag===0) mag=1;
  target.push({
    x: owner==='player'?player.x:enemy.x,
    y: owner==='player'?player.y:enemy.y,
    dx: dx/mag*8,
    dy: dy/mag*8,
    size:8,
    color: color,
    owner: owner
  });
}

// ---------- OBSTACLES ----------
function createObstacles(){
  obstacles.push({x:canvas.width/2-50, y:canvas.height/2, w:100, h:20});
  obstacles.push({x:canvas.width/3, y:canvas.height/3, w:150, h:20});
  obstacles.push({x:2*canvas.width/3, y:2*canvas.height/3, w:20, h:150});
}
createObstacles();

// ---------- GAME LOOP ----------
function gameLoop(){
  if(!gameRunning) return;
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // MOVE PLAYER
  let speed = 5;
  if(keys['w']) player.y -= speed;
  if(keys['s']) player.y += speed;
  if(keys['a']) player.x -= speed;
  if(keys['d']) player.x += speed;

  // PLAYER SHOOT
  if(keys['e']) shoot('player');
  if(keys['q']) shoot('player');

  // ENEMY AI MOVE
  let dx = player.x - enemy.x;
  let dy = player.y - enemy.y;
  let dist = Math.sqrt(dx*dx + dy*dy);
  if(dist>100){ // volg speler alleen als te ver
    enemy.x += dx/dist*3;
    enemy.y += dy/dist*3;
  }

  // ENEMY SHOOT
  if(Math.random()<0.02) shoot('enemy');

  // UPDATE BULLETS
  bullets.forEach((b,i)=>{
    b.x += b.dx; b.y += b.dy;
    if(Math.abs(b.x-enemy.x)<enemy.size/2 && Math.abs(b.y-enemy.y)<enemy.size/2){
      enemy.hp -=5; bullets.splice(i,1); score+=10;
    }
    if(b.x<0||b.x>canvas.width||b.y<0||b.y>canvas.height) bullets.splice(i,1);
  });

  enemyBullets.forEach((b,i)=>{
    b.x += b.dx; b.y += b.dy;
    if(Math.abs(b.x-player.x)<player.size/2 && Math.abs(b.y-player.y)<player.size/2){
      player.hp -=5; enemyBullets.splice(i,1);
    }
    if(b.x<0||b.x>canvas.width||b.y<0||b.y>canvas.height) enemyBullets.splice(i,1);
  });

  // DRAW PLAYER & ENEMY
  ctx.fillStyle = player.color;
  ctx.fillRect(player.x-player.size/2, player.y-player.size/2, player.size, player.size);
  ctx.fillStyle = enemy.color;
  ctx.fillRect(enemy.x-enemy.size/2, enemy.y-enemy.size/2, enemy.size, enemy.size);

  // DRAW BULLETS
  bullets.forEach(b=>{
    ctx.fillStyle = b.color;
    ctx.beginPath();
    ctx.arc(b.x,b.y,b.size,0,Math.PI*2);
    ctx.fill();
  });
  enemyBullets.forEach(b=>{
    ctx.fillStyle = b.color;
    ctx.beginPath();
    ctx.arc(b.x,b.y,b.size,0,Math.PI*2);
    ctx.fill();
  });

  // DRAW OBSTACLES
  ctx.fillStyle='grey';
  obstacles.forEach(o=>ctx.fillRect(o.x-o.w/2,o.y-o.h/2,o.w,o.h));

  // UPDATE UI
  document.getElementById('hp').innerText='HP: '+player.hp;
  document.getElementById('special').innerText='Special: '+player.special+'/100';
  document.getElementById('score').innerText='Score: '+score;

  // GAME OVER
  if(player.hp<=0){ alert('Game Over! Score: '+score); gameRunning=false; return; }
  if(enemy.hp<=0){ alert('You Won! Score: '+score); gameRunning=false; return; }

  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>


































